(this["webpackJsonpmulti-kelly"]=this["webpackJsonpmulti-kelly"]||[]).push([[0],{73:function(e,t,c){},74:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(9),r=c.n(i),s=c(13),l=c(12),o=c(14),b=c(36),j=c(120),u=c(121),d=c(108),p=c(109),x=c(118),O=c(37),m=c.n(O),h=c(111),f=c(18),y=c.n(f),P=c(3),g=0,v=function(e){var t=e.title,c=e.label,a=e.labelProps,i=e.inputProps,r=Object(n.useState)(++g),s=Object(o.a)(r,2),b=s[0],x=(s[1],"mui-pct-".concat(b));return Object(P.jsx)(j.a,{children:Object(P.jsxs)("span",{title:t,children:[Object(P.jsx)(u.a,Object(l.a)(Object(l.a)({htmlFor:x},a),{},{children:c})),Object(P.jsx)(d.a,Object(l.a)(Object(l.a)({id:x,type:"number"},i),{},{endAdornment:Object(P.jsx)(p.a,{position:"end",children:"%"})}))]})})},R=["name","description","probabilityPct","expectedReturnPct"],C=["probabilityPct","expectedReturnPct"],k=a.a.memo((function(e){var t=e.name,c=e.description,n=e.probabilityPct,a=e.expectedReturnPct,i=e.useCustomStyling,r=e.showErrors,s=e.updateCallback,l=function(e){var i=e.target.name,r=e.target.value;if(R.includes(i)){var l=C.includes(i);s(Object(b.a)({name:t,description:c,probabilityPct:n,expectedReturnPct:a},i,l?parseFloat(r):r),i)}else console.error("unexpected field name: ".concat(i))},o=r&&"number"!==typeof a,O=r&&"number"!==typeof n,f=function(e){return"number"===typeof e?y.a.round(e,1):""};return Object(P.jsxs)("div",{className:m()("scenario",{"lib-styling":!i}),children:[Object(P.jsx)(v,{title:"likelihood of occurence from 0 - 100",label:"Prob Pct*",labelProps:{error:O},inputProps:{name:"probabilityPct",className:"percent-input",required:!0,value:f(n),error:O,onChange:l}}),Object(P.jsx)(j.a,{children:Object(P.jsxs)("span",{title:"Expected Payoff Pct: gain/loss expected for this scenario\n100 = doubling/getting back amount bet twice.\n0 = no gain/loss -- just return of amount bet\n-100 = losing amount bet.",children:[Object(P.jsx)(u.a,{error:o,children:"Exp Gain*"}),Object(P.jsx)(d.a,{name:"expectedReturnPct",className:"percent-input",required:!0,type:"number",value:f(a),error:o,onChange:l,endAdornment:Object(P.jsx)(p.a,{position:"end",children:"%"})})]})}),Object(P.jsx)(x.a,{label:"Name",className:"name",name:"name",required:!0,value:t||"",error:r&&("string"!==typeof t||!t.trim()),onChange:l}),Object(P.jsx)(x.a,{label:"Description",className:"description",name:"description",value:c||"",onChange:l}),Object(P.jsx)("span",{title:"delete scenario",className:"delete-scenario",children:Object(P.jsx)(h.a,{onClick:function(){return s(null,null)}})})]})})),N=(c(73),c(119)),w=c(75),S=function(e){var t=function(t){return y.a.sum(e.map((function(e){return e.probability*Math.log(1+e.payoffReturn*t/100)})))},c=y.a.range(0,101).map(t);function n(e){var t=Math.max.apply(Math,Object(s.a)(e));return e.indexOf(t)}var a=n(c),i=n(c.map((function(e,t){return t===a?-1/0:e})))>a?1:-1,r=y.a.range(0,9).map((function(e){return a+i*e/10})).map(t),l=n(r),o=r[l];return{betPct:a+i*l/10,graph:c,expectedPayoff:Math.pow(Math.E,o)}};function D(e,t,c){var n=Object(s.a)(e.slice(0,t)),a=Object(s.a)(e.slice(t+1));return c?[].concat(Object(s.a)(n),[c],Object(s.a)(a)):[].concat(Object(s.a)(n),Object(s.a)(a))}c(9);var E=window;E.React2=c(0),console.log("React Compare",E.React1===E.React2);var M=function(e){return y.a.sum(e.map((function(e){return e.probabilityPct||0})))||0},F=function(e){return Math.abs(M(e)-100)<.01},z=function(e){return e.every((function(e){return"number"===typeof e.probabilityPct&&"number"===typeof e.expectedReturnPct&&e.name}))&&e.length>0&&F(e)},q=function(e){var t=e.startScenario,c=e.showHeader,a=e.useCustomStyling,i=e.saveCallback,r=Object(n.useState)(t),b=Object(o.a)(r,2),j=b[0],u=b[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),x=p[0],O=p[1],f=Object(n.useState)(z(t)),g=Object(o.a)(f,2),v=g[0],R=g[1],E=Object(n.useState)(!1),q=Object(o.a)(E,2),I=q[0],J=q[1],A=Object(n.useState)(0),B=Object(o.a)(A,2),G=B[0],H=B[1];Object(n.useEffect)((function(){u(t);var e=z(t);R(e),H(G+1),O(null)}),[t]),Object(n.useEffect)((function(){v&&L()}),[G,v]);var K=function(e,t,c){var n=D(j,e,t);u(n),R(z(n)),(C.includes(c)||null===t)&&O(null)},L=function(){if(v){var e=S(j.map((function(e){return{probability:e.probabilityPct/100,payoffReturn:e.expectedReturnPct/100}})));O(e),J(!1)}else J(!0)},T=M(j);return Object(P.jsxs)("div",{className:m()("kelly-editor",{"lib-styling":!a}),children:[c&&Object(P.jsx)("h1",{children:"Multi Kelly Criterion Calculator"}),Object(P.jsxs)("div",{className:"scenarioManager",children:[Object(P.jsx)("span",{title:"add scenario",className:"add-scenario",children:Object(P.jsx)(h.a,{onClick:function(){u([].concat(Object(s.a)(j),[{}])),O(null)}})}),Object(P.jsx)(N.a,{variant:"outlined",onClick:L,color:v?"primary":"secondary",title:v?"ready":"fix scenarios. ".concat(I?"":" click to see errors"),children:"Calculate"}),!F(j)&&Object(P.jsxs)(w.a,{color:"secondary",children:["Total probability should be 100% but is",y.a.round(T,2),"%."," ",Object(P.jsx)("div",{children:"Can't calculate. Please update the probabilities."})]}),x&&Object(P.jsxs)("div",{className:"results",children:[i&&Object(P.jsx)(N.a,{onClick:function(){i(Object(l.a)(Object(l.a)({},x),{},{scenarioDetails:j}))},variant:"outlined",color:"primary",children:"Save"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)(w.a,{children:["kelly bet size: ",x.betPct,"%"]}),Object(P.jsxs)(w.a,{children:["expected return:"," ",y.a.round(100*(x.expectedPayoff-1),1),"%"]})]})]})]}),Object(P.jsx)("ol",{className:"scenarios-container",children:j.map((function(e,t){return Object(P.jsx)("li",{children:Object(P.jsx)(k,Object(l.a)(Object(l.a)({},e),{},{showErrors:I,updateCallback:K.bind(undefined,t)}))},t)}))})]})},I=[{title:"Generous Coin Flip",scenarioDetails:[{name:"heads",probabilityPct:50,expectedReturnPct:200},{name:"tails",probabilityPct:50,expectedReturnPct:-100}]},{title:"Double or Nothing",scenarioDetails:[{name:"heads",probabilityPct:50,expectedReturnPct:100},{name:"tails",probabilityPct:50,expectedReturnPct:-100}]},{title:"Jelly Beans",scenarioDetails:[{name:"black",probabilityPct:70,expectedReturnPct:-100},{name:"blue",probabilityPct:20,expectedReturnPct:1e3},{name:"red",probabilityPct:10,expectedReturnPct:3e3}]},{title:"stock",scenarioDetails:[{name:"fraud",probabilityPct:5,expectedReturnPct:-100,description:"Complete loss due to fraud: e.g. Enron, Luckin, Wirecard"},{name:"big miss",probabilityPct:10,expectedReturnPct:-50,description:"something goes very wrong"},{name:"miss neg",probabilityPct:15,expectedReturnPct:-15,description:"expectations don't pan out"},{name:"miss even",probabilityPct:15,expectedReturnPct:0,description:"expectations don't pan out"},{name:"win",probabilityPct:25,expectedReturnPct:50,description:"meets expectations"},{name:"big win",probabilityPct:20,expectedReturnPct:100,description:"exceeds expectations"},{name:"huge win",probabilityPct:10,expectedReturnPct:200,description:"far exceeds expectations"}]}],J=c(112),A=c(110),B=c(113),G=c(114),H=c(115),K=c(116),L=c(117),T=function(e){return Object(P.jsx)(J.a,{component:A.a,children:Object(P.jsxs)(B.a,{size:"small",children:[Object(P.jsx)(G.a,{children:Object(P.jsxs)(H.a,{children:[Object(P.jsx)(K.a,{children:"name"}),Object(P.jsx)(K.a,{align:"right",title:"probability",children:"Prob"}),Object(P.jsx)(K.a,{align:"right",title:"expected gain",children:"Exp"}),Object(P.jsx)(K.a,{children:"description"})]})}),Object(P.jsx)(L.a,{children:e.map((function(e,t){return Object(P.jsxs)(H.a,{children:[Object(P.jsx)(K.a,{children:e.name}),Object(P.jsx)(K.a,{align:"right",children:e.probabilityPct}),Object(P.jsx)(K.a,{align:"right",children:e.expectedReturnPct}),Object(P.jsx)(K.a,{children:e.description})]},t)}))})]})})},W=function(e){var t=e.summaries,c=e.selectedCallback,a=e.selectedIndex,i=Object(n.useState)(!1),r=Object(o.a)(i,2),s=r[0],l=r[1],b=function(e){l(!1),c(e)},j=function(){l((function(e){return!e}))},u=function(e){var c=e.index,n=t[c||0];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(N.a,{variant:"contained",color:"primary",onClick:j,disabled:s,children:"Select a scenario"}),null!==c&&!s&&Object(P.jsx)(J.a,{component:A.a,className:"lib-styling scenario-chooser-list",children:Object(P.jsxs)(B.a,{size:"small",children:[Object(P.jsx)(G.a,{children:Object(P.jsxs)(H.a,{children:[Object(P.jsx)(K.a,{children:"Name"}),Object(P.jsx)(K.a,{children:"scenarios"})]})}),Object(P.jsx)(L.a,{children:Object(P.jsxs)(H.a,{onClick:function(){return b(c)},children:[Object(P.jsx)(K.a,{component:"th",scope:"row",children:n.title}),Object(P.jsx)(K.a,{children:T(n.scenarioDetails)})]},c)})]})})]})};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(u,{index:a}),s&&Object(P.jsx)(J.a,{component:A.a,className:"lib-styling scenario-chooser-list",children:Object(P.jsxs)(B.a,{size:"small",children:[Object(P.jsx)(G.a,{children:Object(P.jsxs)(H.a,{children:[Object(P.jsx)(K.a,{children:"Name"}),Object(P.jsx)(K.a,{children:"scenarios"})]})}),Object(P.jsx)(L.a,{className:"outer-container",children:t.map((function(e,t){return Object(P.jsxs)(H.a,{onClick:function(){return b(t)},selected:(a||0)===t,children:[Object(P.jsx)(K.a,{component:"th",scope:"row",children:e.title}),Object(P.jsx)(K.a,{children:T(e.scenarioDetails)})]},t)}))})]})})]})},Q=function(){var e=Object(n.useState)(I),t=Object(o.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(0),r=Object(o.a)(i,2),b=r[0],j=r[1];Object(n.useEffect)((function(){document.title="MultiKelly"}),[]);var u=c[b].scenarioDetails;return Object(P.jsxs)("div",{children:[Object(P.jsx)(W,{summaries:c,selectedCallback:function(e){j(e)},selectedIndex:b}),Object(P.jsx)(q,{showHeader:!0,startScenario:u,saveCallback:function(e){if(b){var t=Object(l.a)(Object(l.a)({},c[b]),{},{summary:e});a(D(c,b,t))}else a([].concat(Object(s.a)(c),[Object(l.a)({title:(new Date).toLocaleString()},e)]))}})]})};r.a.render(Object(P.jsx)(Q,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.e6f5afec.chunk.js.map